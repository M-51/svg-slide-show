const settings={svg:document.getElementsByTagName('svg')[0],speed:0.025,easing:b=>b*b*(3-2*b),interfaceAnimations:!0};function animateObject(b,e){for(let f=0;f<b.length;f+=1)b[f][0](e)}function updateObject(b){for(let e=0;e<b.length;e+=1)b[e][1]()}function animate(b,e,f){return new Promise(g=>{function h(){if(1>j){j+=l,k=settings.easing(j);for(let m=0;m<f.length;m+=1)animateObject(f[m],k);window.requestAnimationFrame(h)}else{for(let m=0;m<f.length;m+=1)updateObject(f[m]);g()}}let j=0,k;const l=0<settings.speed*b?settings.speed*b:0.025;0===b&&(j=1),window.setTimeout(h,e)})}const icons={group:null,polygon1:null,polygon2:null,arc1:null,arc2:null,rect:null},xmlns='http://www.w3.org/2000/svg';icons.group=document.createElementNS(xmlns,'g'),icons.arc1=document.createElementNS(xmlns,'path'),icons.arc1.setAttributeNS(null,'d','M10,20 A10,10 0 0,1 20,10'),icons.group.appendChild(icons.arc1),icons.arc2=document.createElementNS(xmlns,'path'),icons.arc2.setAttributeNS(null,'d','M30,20 A10,10 0 0,1 20,30'),icons.group.appendChild(icons.arc2),icons.polygon1=document.createElementNS(xmlns,'polygon'),icons.polygon1.setAttributeNS(null,'points','10,10 10,30 20,25 20,15'),icons.group.appendChild(icons.polygon1),icons.polygon2=document.createElementNS(xmlns,'polygon'),icons.polygon2.setAttributeNS(null,'points','20,25 20,15 30,20 30,20'),icons.group.appendChild(icons.polygon2),icons.rect=document.createElementNS(xmlns,'rect'),icons.rect.setAttributeNS(null,'x',0),icons.rect.setAttributeNS(null,'y',0),icons.rect.setAttributeNS(null,'width',40),icons.rect.setAttributeNS(null,'height',40),icons.group.appendChild(icons.rect);const css=document.createElementNS('http://www.w3.org/2000/svg','style');css.textContent='#control > rect {opacity: 0; cursor: pointer;} #control > path {stroke:#000; fill:none; stroke-width: 2px; stroke-dasharray: 16px; stroke-dashoffset: 16px}';let defs=settings.svg.getElementsByTagName('defs')[0];defs||(defs=document.createElement('defs'),settings.svg.insertBefore(defs,settings.svg.firstChild)),defs.appendChild(css);const viewBox=settings.svg.viewBox.baseVal,matrix=settings.svg.createSVGMatrix();matrix.e=viewBox.x+10,matrix.f=viewBox.y+(viewBox.height-50),icons.group.id='control',icons.group.transform.baseVal.initialize(settings.svg.createSVGTransformFromMatrix(matrix)),settings.svg.appendChild(icons.group);const event=document.createEvent('Event');event.initEvent('button-click',!0,!0),icons.rect.addEventListener('click',()=>{settings.svg.dispatchEvent(event)});function animatePlayToPause(){function b(){10>=e&&(icons.polygon1.setAttribute('points',`
            10,10 
            10,30 
            ${18<20-e/5?20-e/5:18},${30>25+e/2?25+e/2:30} 
            ${18<20-e/5?20-e/5:18},${10<15-e/2?15-e/2:10}
            `),icons.polygon2.setAttribute('points',`
            ${22>20+e/5?20+e/5:22},${10<15-e/2?15-e/2:10} 
            ${22>20+e/5?20+e/5:22}, ${30>25+e/2?25+e/2:30} 
            30,${30>20+e?20+e:30} 
            30,${10<20-e?20-e:10}
            `),e+=1,window.requestAnimationFrame(b))}let e=1;settings.interfaceAnimations||(e=10),b()}function animatePauseToPlay(){function b(){10>=e&&(icons.polygon1.setAttribute('points',`
                10,10 
                10,30 
                ${20>18+e/5?18+e/5:20},${25<30-e/2?30-e/2:25} 
                ${20>18+e/5?18+e/5:20},${15>10+e/2?10+e/2:15}
            `),icons.polygon2.setAttribute('points',`
                ${20<22-e/5?22-e/5:20},${15>10+e/2?10+e/2:15} 
                ${20<22-e/5?22-e/5:20},${25<30-e/2?30-e/2:25} 
                30,${30-(20<e)?30-e:20} 
                30,${10+(20>e)?10+e:20}
            `),e+=1,window.requestAnimationFrame(b))}let e=1;settings.interfaceAnimations||(e=10),b()}function animatePauseToReload(){function b(){0<g?(g-=1,icons.arc1.setAttribute('style',`stroke-dashoffset:${g}px`),icons.arc2.setAttribute('style',`stroke-dashoffset:${g}px`),window.requestAnimationFrame(b)):(icons.arc1.setAttribute('style','stroke-dashoffset:0'),icons.arc2.setAttribute('style','stroke-dashoffset:0'))}function e(){10>=f?(icons.polygon1.setAttribute('points',`
                ${6<10-0.4*f?10-0.4*f:6},${20>10+f?10+f:20} 
                10,${26<30-0.4*f?30-0.4*f:26} 
                ${10<18-0.8*f?18-0.8*f:10},${26<30-0.4*f?30-0.4*f:26} 
                ${14<18-0.4*f?18-0.4*f:14},${20>10+f?10+f:20}
            `),icons.polygon2.setAttribute('points',`
                ${30>22+0.8*f?22+0.8*f:30},${14>10+0.4*f?10+0.4*f:14} 
                ${26>22+0.4*f?22+0.4*f:26},${20<30-f?30-f:20} 
                 ${34>30+0.4*f?30+0.4*f:34},${20<30-f?30-f:20} 
                30,${14>10+0.4*f?10+0.4*f:14}
            `),f+=1,window.requestAnimationFrame(e)):b()}let f=1,g=16;settings.interfaceAnimations||(f=10,g=0),e()}function animateReloadToPlay(){function b(){10>=f&&(icons.polygon1.setAttribute('points',`
                ${10>6+0.4*f?6+0.4*f:10},${10<20-f?20-f:10} 
                10,${30>26+0.4*f?26+0.4*f:30} 
                ${20>10+f?10+f:20},${25<26-0.1*f?26-0.1*f:25} 
                ${20>14+0.6*f?14+0.6*f:20},${15<20-0.5*f?20-0.5*f:15}
            `),icons.polygon2.setAttribute('points',`
                ${20<30-f?30-f:20},${15>14+0.1*f?14+0.1*f:15} 
                ${20<26-0.6*f?26-0.6*f:20},${25>20+0.5*f?20+0.5*f:25} 
                ${30<34-0.4*f?34-0.4*f:30},20 
                30,${20>14+0.6*f?14+0.6*f:20}
            `),f+=1,window.requestAnimationFrame(b))}function e(){16>g?(g+=1,icons.arc1.setAttribute('style',`stroke-dashoffset:${g}px`),icons.arc2.setAttribute('style',`stroke-dashoffset:${g}`),window.requestAnimationFrame(e)):(icons.arc1.removeAttribute('style'),icons.arc2.removeAttribute('style'),b())}let f=1,g=0;settings.interfaceAnimations||(f=10,g=16),e()}const slides=[],objectList=new Set;let currentSlide=0,status='not started';function start(){currentSlide=0,slides[currentSlide].play()}function reset(){objectList.forEach(b=>{b.reset()})}function resume(){currentSlide+1>=slides.length?(status='finished',animatePauseToReload()):(currentSlide+=1,slides[currentSlide].play(),animatePlayToPause())}function controlPlayer(){if(0===slides.length)throw new Error('No slides to animate. Add slides using "addSlides" function.');'finished'==status?(status='not started',reset(),animateReloadToPlay()):'playing'==status?(status='paused',animatePauseToPlay()):'paused'==status?(status='playing',resume()):'not started'==status&&(status='playing',start(),animatePlayToPause())}function next(b){currentSlide+1>=slides.length?(status='finished',animatePauseToReload()):'paused'!=status&&(currentSlide+=1,window.setTimeout(()=>{slides[currentSlide].play()},b))}function addSlides(...b){slides.push(...b)}function addObjects(b){objectList.add(b)}document.documentElement.addEventListener('button-click',controlPlayer,!1);const utils={undef:b=>'undefined'==typeof b};function calculateTransform(b){const e=b.transform;if(!utils.undef(e)){let f,g;const h=b.object,j=b.object.tr,k=e.scale-j.scale,l=e.rotate-j.rotate;let m,n;return utils.undef(e.translate)||(m=e.translate[0]-j.translate[0],n=e.translate[1]-j.translate[1]),utils.undef(e.translate)?utils.undef(e.rotate)?(f=p=>{h.scale(j.scale+k*p)},g=()=>{h.scale(e.scale),j.scale=e.scale}):utils.undef(e.scale)?(f=p=>{h.rotate(j.rotate+l*p)},g=()=>{h.rotate(e.rotate),j.rotate=e.rotate}):(f=p=>{h.scaleAndRotate(j.scale+k*p,j.rotate+l*p)},g=()=>{h.scaleAndRotate(e.scale,e.rotate),j.scale=e.scale,j.rotate=e.rotate}):utils.undef(e.scale)&&utils.undef(e.rotate)?(f=p=>{h.translate(j.translate[0]+m*p,j.translate[1]+n*p)},g=()=>{h.translate(e.translate[0],e.translate[1]),j.translate=e.translate}):utils.undef(e.rotate)?(f=p=>{h.scaleAndTranslate(j.scale+k*p,j.translate[0]+m*p,j.translate[1]+n*p)},g=()=>{h.scaleAndTranslate(e.scale,e.translate[0],e.translate[1]),j.scale=e.scale,j.translate=e.translate}):'undefined'==typeof e.scale?(f=p=>{h.rotateAndTranslate(j.rotate+l*p,j.translate[0]+m*p,j.translate[1]+n*p)},g=()=>{h.rotateAndTranslate(e.rotate,e.translate[0],e.translate[1]),j.rotate=e.rotate,j.translate=e.translate}):(f=p=>{h.scaleAndRotateAndTranslate(j.scale+k*p,j.rotate+l*p,j.translate[0]+m*p,j.translate[1]+n*p)},g=()=>{h.scaleAndRotateAndTranslate(e.scale,e.rotate,e.translate[0],e.translate[1]),j.scale=e.scale,j.rotate=e.rotate,j.translate=e.translate}),[f,g]}return!1}function calculateAttributes(b){function e(h){for(let j=0;j<g.length;j+=1)b.object.obj.setAttribute(g[j][0],g[j][1]+(g[j][2]-g[j][1])*h)}function f(){for(let h=0;h<g.length;h+=1)b.object.obj.setAttribute(g[h][0],g[h][2]),b.object.variables.set(g[h][0],g[h][2])}const g=[];if(!utils.undef(b.attributes)&&0!==b.attributes.length){const h=Array.isArray(b.attributes)?b.attributes:[b.attributes];for(let j=0;j<h.length;j+=1){const k=h[j].name,l=utils.undef(h[j].from)?b.object.variables.get(k):h[j].from;if(utils.undef(l))throw new Error(`No "from" value, for ${k}`);const m=h[j].to;g.push([k,l,m])}return[e,f]}return!1}function calculateRemove(b){const e=b.remove;let f,g;if(!utils.undef(e)){const h=[],j=[],k=Array.isArray(e)?e:[e];for(let l=0;l<k.length;l+=1)'end'===k[l].when?j.push(k[l]):h.push(k[l]);if(h.length)for(let l=0;l<h.length;l+=1)b.object.obj.removeAttribute(h[l].name),b.object.variables.delete(h[l].name);if(j.length)return f=()=>!1,g=()=>{for(let l=0;l<j.length;l+=1)b.object.obj.removeAttribute(j[l].name),b.object.variables.delete(j[l].name)},[f,g]}return!1}function calculateSet(b){const e=b.set;let f,g;if(!utils.undef(e)){const h=[],j=[],k=Array.isArray(e)?e:[e];for(let l=0;l<k.length;l+=1)'end'===k[l].when?j.push(k[l]):h.push(k[l]);if(h.length)for(let l=0;l<h.length;l+=1)b.object.obj.setAttribute(h[l].name,h[l].value),b.object.variables.set(h[l].name,h[l].value);if(j.length)return f=()=>!1,g=()=>{for(let l=0;l<j.length;l+=1)b.object.obj.setAttribute(j[l].name,j[l].value),b.object.variables.set(j[l].name,j[l].value)},[f,g]}return!1}function fadeIn(b){return b.obj.removeAttribute('display'),b.obj.setAttribute('opacity',0),[e=>{b.obj.setAttribute('opacity',e)},()=>{b.obj.setAttribute('opacity',1),b.variables.set('opacity',1),b.variables.delete('display',1)}]}function fadeOut(b){return b.obj.setAttribute('opacity',1),b.obj.removeAttribute('display'),[e=>{b.obj.setAttribute('opacity',1-e)},()=>{b.obj.setAttribute('opacity',0),b.obj.setAttribute('display','none'),b.variables.set('opacity',0),b.variables.set('display','none')}]}function calculateEffects(b){function e(k){for(let l=0;l<h.length;l+=1)h[l][0](k)}function f(){for(let k=0;k<h.length;k+=1)h[k][1]()}const g=b.effects,h=[],j=b.object;if(!utils.undef(g)){const k=Array.isArray(g)?g:[g];for(let l=0;l<k.length;l+=1){const m=k[l];'fadeIn'===m.effect?h.push(fadeIn(j)):'fadeOut'===m.effect&&h.push(fadeOut(j))}return[e,f]}return!1}function calculate(b){return new Promise(e=>{const f=[],g=Array.isArray(b.objects)?b.objects:[b.objects],h=utils.undef(b.speed)?1:b.speed,j=b.delay||0;for(let k=0;k<g.length;k+=1){const l=g[k],m=calculateTransform(l);m&&f.push([m]);const n=calculateAttributes(l);n&&f.push([n]);const p=calculateRemove(l);p&&f.push([p]);const q=calculateSet(l);q&&f.push([q]);const u=calculateEffects(l);u&&f.push([u]),addObjects(g[k].object)}animate(h,j,f).then(()=>{e()})})}function dispatch(...b){return new Promise((e,f)=>{if(0===b.length)f(Error('Add objects to "step" function'));else{const g=[];for(let h=0;h<b.length;h+=1)g.push(calculate(b[h]));Promise.all(g).then(()=>{e()})}})}const step=dispatch;class Obj{constructor(b,e={translate:[0,0],rotate:0,scale:1}){this.obj=b,this.manipulationMatrix=settings.svg.createSVGMatrix(),this.setStartingVariables(e),this.setInitialMatrix(),this.tr=this.variables.get('transform')}setStartingVariables(b){const e=new Map;for(let f=0;f<this.obj.attributes.length;f+=1)this.obj.attributes[f].specified&&'transform'!==this.obj.attributes[f].name&&e.set(this.obj.attributes[f].name,parseFloat(this.obj.attributes[f].value)||this.obj.attributes[f].value);this.startingVariables=new Map(e),this.variables=new Map(e);for(let f=0;2>f;f+=1)[this.startingVariables,this.variables][f].set('transform',{translate:utils.undef(b.translate)?[0,0]:b.translate,scale:utils.undef(b.scale)?1:b.scale,rotate:utils.undef(b.rotate)?0:b.rotate})}setInitialMatrix(){const b=this.variables.get('transform');this.obj.transform.baseVal.initialize(settings.svg.createSVGTransformFromMatrix(this.manipulationMatrix)),this.SVGTransform=this.obj.transform.baseVal.getItem(0),this.scaleAndRotateAndTranslate(b.scale,b.rotate,b.translate[0],b.translate[1])}setMatrix(b){this.SVGTransform.setMatrix(b)}reset(){this.variables=new Map(this.startingVariables);const b=this.startingVariables.get('transform');this.variables.set('transform',{translate:b.translate,scale:b.scale,rotate:b.rotate}),this.tr=this.variables.get('transform');const e=this.obj;for(let f=e.attributes.length-1;0<=f;f-=1)'transform'!==e.attributes[f].name&&e.removeAttribute(e.attributes[f].name);this.variables.forEach(function(g,h){'transform'!==h&&e.setAttribute(h,g)}),this.setInitialMatrix()}translate(b,e){this.manipulationMatrix.e=b,this.manipulationMatrix.f=e,this.setMatrix(this.manipulationMatrix)}rotate(b){const e=-b*Math.PI/180,f=Math.sin(e)*this.tr.scale,g=Math.cos(e)*this.tr.scale;this.manipulationMatrix.a=g,this.manipulationMatrix.b=-f,this.manipulationMatrix.c=f,this.manipulationMatrix.d=g,this.setMatrix(this.manipulationMatrix)}scale(b){const e=-this.tr.rotate*Math.PI/180,f=Math.sin(e)*b,g=Math.cos(e)*b;this.manipulationMatrix.a=g,this.manipulationMatrix.b=-f,this.manipulationMatrix.c=f,this.manipulationMatrix.d=g,this.setMatrix(this.manipulationMatrix)}scaleAndRotate(b,e){const f=-e*Math.PI/180,g=Math.sin(f)*b,h=Math.cos(f)*b;this.manipulationMatrix.a=h,this.manipulationMatrix.b=-g,this.manipulationMatrix.c=g,this.manipulationMatrix.d=h,this.setMatrix(this.manipulationMatrix)}scaleAndTranslate(b,e,f){const g=-this.tr.rotate*Math.PI/180,h=Math.sin(g)*b,j=Math.cos(g)*b;this.manipulationMatrix.a=j,this.manipulationMatrix.b=-h,this.manipulationMatrix.c=h,this.manipulationMatrix.d=j,this.manipulationMatrix.e=e,this.manipulationMatrix.f=f,this.setMatrix(this.manipulationMatrix)}rotateAndTranslate(b,e,f){const g=-b*Math.PI/180,h=Math.sin(g)*this.tr.scale,j=Math.cos(g)*this.tr.scale;this.manipulationMatrix.a=j,this.manipulationMatrix.b=-h,this.manipulationMatrix.c=h,this.manipulationMatrix.d=j,this.manipulationMatrix.e=e,this.manipulationMatrix.f=f,this.setMatrix(this.manipulationMatrix)}scaleAndRotateAndTranslate(b,e,f,g){const h=-e*Math.PI/180,j=Math.sin(h)*b,k=Math.cos(h)*b;this.manipulationMatrix.a=k,this.manipulationMatrix.b=-j,this.manipulationMatrix.c=j,this.manipulationMatrix.d=k,this.manipulationMatrix.e=f,this.manipulationMatrix.f=g,this.setMatrix(this.manipulationMatrix)}}class Slide{}(()=>[step,Obj,Slide,addSlides,next])();